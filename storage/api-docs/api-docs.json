{
    "openapi": "3.0.0",
    "info": {
        "title": "Payment Service API",
        "description": "API for Payment service project",
        "version": "1.0.0"
    },
    "paths": {
        "/api/v1/checkout/{t_id}": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "get the transaction details according to fg_id",
                "operationId": "App\\Http\\Controllers\\V1\\CheckoutController::checkout",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "path",
                        "description": "the transaction id, t_id in transaction table",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "get the transaction information",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    },
                    "404": {
                        "description": "transaction not found"
                    }
                }
            }
        },
        "/api/v1/cmi/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "redirect request from CMI",
                "operationId": "App\\Http\\Controllers\\V1\\CmiController::redirto",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/cmi/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from CMI",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/cmi/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "background callback from CMI",
                "operationId": "App\\Http\\Controllers\\V1\\CmiController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/fawry/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "background callback from fawry",
                "operationId": "App\\Http\\Controllers\\V1\\FawryController::redirto",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/fawry/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "background callback from fawry",
                "operationId": "App\\Http\\Controllers\\V1\\FawryController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/fawry/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from fawry",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/globaliris/redirto": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from globaliris",
                "operationId": "App\\Http\\Controllers\\V1\\GlobalirisController::redirto",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/globaliris/return": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from globaliris",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/globaliris/redirect": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from globaliris",
                "operationId": "App\\Http\\Controllers\\V1\\GlobalirisController::redirect",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/invoice/{transaction_id}": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "download the invoice file according to transaction_id",
                "operationId": "App\\Http\\Controllers\\V1\\InvoiceController::fetch",
                "parameters": [
                    {
                        "name": "transaction_id",
                        "in": "path",
                        "description": "the transaction_id",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "DEVELOPMENT20210414-dzALG2be-0000000055"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "return invoice pdf",
                        "content": {
                            "application/pdf": {}
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            }
        },
        "/api/v1/k-bank/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from k-bank",
                "operationId": "App\\Http\\Controllers\\V1\\KBankController::redirto",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    },
                    {
                        "name": "token",
                        "in": "query",
                        "description": "token id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "tokn_test_2088099ffb71c1a4a3441419cd20fec81d7e7"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/k-bank/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from k-bank",
                "operationId": "App\\Http\\Controllers\\V1\\KBankController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/k-bank/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from k-bank",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/k-bank/config": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return config for k-bank",
                "operationId": "App\\Http\\Controllers\\V1\\KBankController::fetchConfig",
                "parameters": [
                    {
                        "name": "client",
                        "in": "query",
                        "description": "define which client you want to create the acccount in",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "email",
                            "example": "be"
                        }
                    },
                    {
                        "name": "issuer",
                        "in": "query",
                        "description": "the issuer in database",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "email",
                            "example": "thBKK2be"
                        }
                    },
                    {
                        "name": "payment",
                        "in": "query",
                        "description": "the payment name",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "email",
                            "example": "k-bank"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/pay_bank/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PayBankController::redirto",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/pay_bank/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/pay_bank/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PayBankController::notify",
                "parameters": [
                    {
                        "name": "transaction",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    },
                    {
                        "name": "currency",
                        "in": "query",
                        "description": "3-digit currency code",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "RMB"
                        }
                    },
                    {
                        "name": "amount",
                        "in": "query",
                        "description": "the amount of bank payment paid",
                        "required": true,
                        "schema": {
                            "type": "float",
                            "example": "10.00"
                        }
                    },
                    {
                        "name": "token",
                        "in": "query",
                        "description": "the amount of bank payment paid",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "afdba9a05eb64b07103a340a6e20d7e5d22b2e1dc9b27dc0783f99e8114d154b"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction confirmed",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/pay_later/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PayLaterController::redirto",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/pay_later/return": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paypal/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PayPalController::redirto",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paypal/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PayPalController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paypal/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paypal/wait": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "get the payment status",
                "operationId": "App\\Http\\Controllers\\V1\\PayPalController::wait",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paygate/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from globaliris",
                "operationId": "App\\Http\\Controllers\\V1\\PaygateController::redirto",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paygate/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\PaygateController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/paygate/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/payu/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from payu",
                "operationId": "App\\Http\\Controllers\\V1\\PayuController::redirto",
                "parameters": [
                    {
                        "name": "t_id",
                        "in": "query",
                        "description": "transaction id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/payu/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from payu",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/tingg/redirto": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\TinggController::redirto",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/tingg/return": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/tingg/notify": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "return reqeust from paygate",
                "operationId": "App\\Http\\Controllers\\V1\\TinggController::notify",
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/transaction/{fg_id}": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "get the transaction details according to fg_id",
                "operationId": "App\\Http\\Controllers\\V1\\TransactionController::fetch",
                "parameters": [
                    {
                        "name": "fg_id",
                        "in": "path",
                        "description": "the tlsconnect fg_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "desc or asc",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": ""
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "get the transaction information",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    },
                    "404": {
                        "description": "transaction not found"
                    }
                }
            }
        },
        "/api/v1/transaction": {
            "post": {
                "tags": [
                    "Payment API"
                ],
                "description": "create a new transaction",
                "operationId": "App\\Http\\Controllers\\V1\\TransactionController::create",
                "parameters": [
                    {
                        "name": "fg_id",
                        "in": "query",
                        "description": "tlsconnect fg_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": "10000"
                        }
                    },
                    {
                        "name": "client",
                        "in": "query",
                        "description": "the client id",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "be"
                        }
                    },
                    {
                        "name": "issuer",
                        "in": "query",
                        "description": "the issuer tab",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "dzALG2be"
                        }
                    },
                    {
                        "name": "currency",
                        "in": "query",
                        "description": "the payment currency for this transaction",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "MAD"
                        }
                    },
                    {
                        "name": "redirect_url",
                        "in": "query",
                        "description": "the tlsconnect website redirection url",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "onSuccess_tlsweb_url?lang=fr-fr"
                        }
                    },
                    {
                        "name": "onerror_url",
                        "in": "query",
                        "description": "the tlsconnect website error url",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "onError_tlsweb_url?lang=fr-fr"
                        }
                    },
                    {
                        "name": "reminder_url",
                        "in": "query",
                        "description": "the tlsconnect website reminder url",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "callback_to_send_reminder?lang=fr-fr"
                        }
                    },
                    {
                        "name": "callback_url",
                        "in": "query",
                        "description": "the tlsconnect website callback url",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "receipt_url/{fg_id}?lang=fr-fr"
                        }
                    },
                    {
                        "name": "workflow",
                        "in": "query",
                        "description": "workflow",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "postal"
                        }
                    },
                    {
                        "name": "items",
                        "in": "query",
                        "description": "transaction items. ",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": ""
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "transaction created",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        },
        "/api/v1/transactions": {
            "get": {
                "tags": [
                    "Payment API"
                ],
                "description": "get all transactions",
                "operationId": "App\\Http\\Controllers\\V1\\TransactionController::fetchAll",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "page, default 1",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": "1"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "number of result per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": "20"
                        }
                    },
                    {
                        "name": "issuer",
                        "in": "query",
                        "description": "define which issuer you want to fetch",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "egCAI2be"
                        }
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "description": "start date",
                        "required": false,
                        "schema": {
                            "type": "date",
                            "example": "2021-01-01"
                        }
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "description": "end date",
                        "required": false,
                        "schema": {
                            "type": "date",
                            "example": "2021-12-31"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "transaction stats, eg pending, waiting, close, done",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "pending"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "get the transaction",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error: bad request"
                    }
                }
            }
        }
    }
}